!function(){mapboxgl.accessToken="pk.eyJ1IjoiYXV0b2RldmVsbyIsImEiOiJjanc2OWlmZ2gwcjk3M3ptczc3ZGE5ZG1jIn0.dZ5ZuVN7nteJiXg3UhZjKA";var e=new mapboxgl.Map({container:"place_map",style:"mapbox://styles/mapbox/streets-v11",center:window.innerWidth<=768?[17.285995,49.43038]:[17.285995,19.43038],minZoom:2}),o=new MapboxGeocoder({accessToken:mapboxgl.accessToken,marker:{color:"orange"},mapboxgl:mapboxgl});e.addControl(o);var t=document.body.dataset.langId,n="/places";function c(e){var o=e.point_count>=50?18:e.point_count>=20?16:e.point_count>=10?14:12,t=e.point_count>=50?50:e.point_count>=20?32:e.point_count>=10?24:18,n=2*t,c='<svg width="'+n+'" height="'+n+'" viewbox="0 0 '+n+" "+n+'" text-anchor="middle" style="font: '+o+'px sans-serif"><circle cx="'+t+'" cy="'+t+'" r="'+Math.round(.6*t)+'" fill="white" /><text dominant-baseline="central" transform="translate('+t+", "+t+')">'+e.point_count+"</text></svg>",a=document.createElement("div");return a.innerHTML=c,a.firstChild}2==t&&(n+="-cs"),n+=".json",e.on("load",function(){e.addSource("places",{type:"geojson",data:n,cluster:!0,clusterMaxZoom:40,clusterRadius:30}),e.addLayer({id:"place_circle",type:"circle",source:"places",filter:["!=","cluster",!0],paint:{"circle-color":"#009ee2","circle-opacity":.9,"circle-radius":10}}),e.addLayer({id:"countries",source:{type:"vector",url:"mapbox://byfrost-articles.74qv0xp0"},"source-layer":"ne_10m_admin_0_countries-76t9ly",type:"fill",paint:{"fill-color":"#dc3545","fill-opacity":.35}});var o=["AUT","DEU","CHL","FRA","ESP","PRT","GHA","LBN","KWT","SAU","BHR","JOR","IRQ","NLD","BEL","HUN","POL","RUS","BLR","UKR","EST","LVA","LTU","GRC","ITA","CYP","CHN","KOR","BGR","SVN","XKX","MNE","MDA","TWN","ALB","BIH","MLT","JPN","ROU","HRV","ARE","BHR","AUS","CHE","ITA","PRT","SWE","FIN"];o.push(2==t?"SVK":"CZE"),e.setFilter("countries",["in","ADM0_A3_IS"].concat(o));var a={},r={};function i(){for(var o={},t=e.querySourceFeatures("places"),n=0;n<t.length;n++){var i=t[n].geometry.coordinates,l=t[n].properties;if(l.cluster){var s=l.cluster_id,p=a[s];if(!p){var u=c(l);p=a[s]=new mapboxgl.Marker({element:u}).setLngLat(i)}o[s]=p,r[s]||p.addTo(e)}}for(s in r)o[s]||r[s].remove();r=o}e.on("data",function(o){"places"===o.sourceId&&(e.on("move",i),e.on("moveend",i),i())}),e.on("click","place_circle",function(o){for(var t=o.features[0].geometry.coordinates.slice(),n=o.features[0].properties.description;Math.abs(o.lngLat.lng-t[0])>180;)t[0]+=o.lngLat.lng>t[0]?360:-360;(new mapboxgl.Popup).setLngLat(t).setHTML(n).addTo(e)}),e.on("mouseenter","place_circle",function(){e.getCanvas().style.cursor="pointer"}),e.on("mouseleave","place_circle",function(){e.getCanvas().style.cursor=""})})}();